<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real DeepSeek Streaming - AI Platform</title>
    <link href="/css/tailwind.css" rel="stylesheet">
    <script src="/js/real-streaming.js"></script>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <!-- Navigation -->
    <nav class="bg-gray-800 border-b border-gray-700 px-6 py-4">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <h1 class="text-xl font-bold">DeepSeek Real-Time Streaming</h1>
                <div class="flex space-x-6">
                    <a href="/" class="text-gray-300 hover:text-white">Generator</a>
                    <a href="/chat.html" class="text-gray-300 hover:text-white">Chat</a>
                    <a href="/real-streaming.html" class="text-blue-400 font-medium">Real Streaming</a>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <div id="streamingStatus" class="text-gray-400">Ready</div>
                <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold mb-4">Real DeepSeek Streaming Chat</h1>
            <p class="text-gray-400 text-lg">Experience authentic token-by-token streaming with full reasoning capabilities</p>
            <div class="mt-4 flex justify-center space-x-4">
                <span class="inline-block bg-green-900 px-3 py-1 rounded-full text-sm">ðŸ”„ Real-Time Tokens</span>
                <span class="inline-block bg-blue-900 px-3 py-1 rounded-full text-sm">ðŸ§  DeepSeek Reasoning</span>
                <span class="inline-block bg-purple-900 px-3 py-1 rounded-full text-sm">ðŸ“š RAG Integration</span>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Chat Interface -->
            <div class="lg:col-span-2">
                <div class="bg-gray-800 rounded-lg p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-semibold">Live Streaming Chat</h2>
                        <div class="flex space-x-2">
                            <button id="startStreaming" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded text-sm">
                                Start Demo
                            </button>
                            <button id="stopStreaming" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-sm" disabled>
                                Stop
                            </button>
                            <button id="clearChat" class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded text-sm">
                                Clear
                            </button>
                        </div>
                    </div>

                    <!-- Chat Container -->
                    <div id="streamingChatContainer" class="bg-gray-900 rounded-lg p-4 h-96 overflow-y-auto mb-4 border border-gray-700">
                        <!-- Messages will appear here -->
                    </div>

                    <!-- Chat Input -->
                    <form id="streamingChatForm" class="flex space-x-2">
                        <input 
                            type="text" 
                            id="streamingMessageInput" 
                            placeholder="Ask about AI development, coding, or platform-specific guidance..."
                            class="flex-1 p-3 bg-gray-700 border border-gray-600 rounded-md"
                            required
                        >
                        <button 
                            type="submit" 
                            class="bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-md font-medium"
                        >
                            Send
                        </button>
                    </form>
                </div>
            </div>

            <!-- Technical Details -->
            <div class="space-y-6">
                <!-- Streaming Status -->
                <div class="bg-gray-800 rounded-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Streaming Status</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span>API Status:</span>
                            <span id="apiStatusIndicator" class="text-green-400">Connected</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Stream State:</span>
                            <span id="streamStateIndicator" class="text-gray-400">Idle</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Model:</span>
                            <span class="text-blue-400">deepseek-chat</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Reasoning:</span>
                            <span class="text-purple-400">Enabled</span>
                        </div>
                    </div>
                </div>

                <!-- Implementation Details -->
                <div class="bg-gray-800 rounded-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Implementation</h3>
                    <div class="text-sm text-gray-300 space-y-2">
                        <p><strong>Frontend:</strong> Fetch API with ReadableStream</p>
                        <p><strong>Backend:</strong> Server-Sent Events (SSE)</p>
                        <p><strong>Protocol:</strong> Token-by-token streaming</p>
                        <p><strong>API:</strong> DeepSeek Chat Completions</p>
                        <p><strong>Features:</strong> Real-time tokens, reasoning chains, RAG integration</p>
                    </div>
                </div>

                <!-- Example Queries -->
                <div class="bg-gray-800 rounded-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Try These Queries</h3>
                    <div class="space-y-2">
                        <button class="w-full text-left p-2 bg-gray-700 hover:bg-gray-600 rounded text-sm query-example" 
                                data-query="Create a real-time chat app with authentication">
                            Real-time chat app with auth
                        </button>
                        <button class="w-full text-left p-2 bg-gray-700 hover:bg-gray-600 rounded text-sm query-example"
                                data-query="Build an AI-powered fitness tracking application">
                            AI fitness tracking app
                        </button>
                        <button class="w-full text-left p-2 bg-gray-700 hover:bg-gray-600 rounded text-sm query-example"
                                data-query="Implement streaming video chat with WebRTC">
                            Streaming video chat
                        </button>
                        <button class="w-full text-left p-2 bg-gray-700 hover:bg-gray-600 rounded text-sm query-example"
                                data-query="Design a microservices architecture for e-commerce">
                            Microservices e-commerce
                        </button>
                    </div>
                </div>

                <!-- Technical Specs -->
                <div class="bg-gray-800 rounded-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Technical Specs</h3>
                    <div class="text-xs text-gray-400 space-y-1">
                        <div>Stream: Server-Sent Events</div>
                        <div>Protocol: HTTP/1.1</div>
                        <div>Format: JSON Lines</div>
                        <div>Encoding: UTF-8</div>
                        <div>Timeout: 45 seconds</div>
                        <div>Buffer: Dynamic chunks</div>
                        <div>Fallback: Error handling</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Add click handlers for example queries
        document.addEventListener('DOMContentLoaded', () => {
            const queryExamples = document.querySelectorAll('.query-example');
            queryExamples.forEach(button => {
                button.addEventListener('click', () => {
                    const query = button.getAttribute('data-query');
                    const input = document.getElementById('streamingMessageInput');
                    if (input) {
                        input.value = query;
                        input.focus();
                    }
                });
            });

            // Update status indicators
            const updateStatus = () => {
                const apiStatus = document.getElementById('apiStatusIndicator');
                const streamState = document.getElementById('streamStateIndicator');
                
                if (window.realStreaming) {
                    if (apiStatus) apiStatus.textContent = 'Connected';
                    if (streamState) {
                        streamState.textContent = window.realStreaming.isStreaming ? 'Streaming' : 'Ready';
                        streamState.className = window.realStreaming.isStreaming ? 'text-green-400' : 'text-gray-400';
                    }
                }
            };

            setInterval(updateStatus, 1000);
        });
    </script>
</body>
</html>